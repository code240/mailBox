<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <link rel="stylesheet" href="css/cssAfterLogin/home.css" />
    <link rel="stylesheet" href="css/cssAfterLogin/profile.css" />
    <link rel="shortcut icon" href="media/arroba.png" type="image/x-icon" />
    <title>Compose - MailBox</title>
</head>

<body>
    <header class="header-top">
        <div class="header-left-div">
            <h1 class="brand-heading">
                <b class="brand-m">M</b>ail<b class="brand-b">B</b>ox
            </h1>
        </div>
        <div class="header-right-div">
            <div class="for-owner-image">
                <img src="profiles/{{data.dp}}" class="owner-image" alt="mailBox-user">
            </div>
        </div>
        <div class="clear" style="clear: both;"></div>
    </header>
    <header class="options-header"  id="option-header">
        <span class="bars">
            <i class="fas fa-bars" onclick="shownav()" id="bar"></i>
            <i class="fas fa-times" onclick="cutnav()" id="cut"></i>
        </span>
    </header>
    

    <header class="icons-header" id="icon-header">
        <span class="header-icon hi-1 " onclick="window.location.assign('/home');">
            <i class="far fa-envelope"></i>
        </span>
        <span class="header-icon hi-1" onclick="window.location.assign('/sent');">
            <i class="far fa-paper-plane"></i>
        </span>
        <span class="header-icon hi-1"  onclick="window.location.assign('/compose');">
            <i class="far fa-edit"></i>
        </span>
        <span class="header-icon hi-1 hi-active" onclick="window.location.assign('/profile');">
            <i class="fas fa-user-circle"></i>
        </span>
        <span class="header-icon hi-1">
            <i class="fas fa-bars" onclick="shownav()" id="bar-mobi"></i>
            <i class="fas fa-times" onclick="cutnav()" id="cut-mobi"></i>

        </span>
        <div style="clear: both;"></div>
    </header>


    <nav class="navbar" id="nav">
        <span class="nav-opt opt-1"  onclick="window.location.assign('/home');"> 
            <i class="fas fa-envelope"></i> &nbsp;&nbsp;&nbsp;&nbsp; Recived 
        </span>
        <span class="nav-opt opt-2"  onclick="window.location.assign('/sent');">
            <i class="fas fa-paper-plane"></i> &nbsp;&nbsp;&nbsp;&nbsp;  Sent
        </span>
        <span class="nav-opt opt-2" onclick="window.location.assign('/compose');">
            <i class="fas fa-pen-alt"></i> &nbsp;&nbsp;&nbsp;&nbsp;  Compose
        </span>
        <span class="nav-opt opt-3 active" onclick="window.location.assign('/profile');">
            <i class="fas fa-user-circle"></i> &nbsp;&nbsp;&nbsp;&nbsp;  Profile
        </span>
        <span class="nav-opt opt-4" onclick="window.location.assign('/logout');">
            <i class="fas fa-share-square"></i> &nbsp;&nbsp;&nbsp;&nbsp; Logout
        </span>
        <hr>

        
        <span class="nav-opt opt-3"  onclick="window.location.assign('/help');">
           <i class="fas fa-question-circle"></i> &nbsp;&nbsp;&nbsp;&nbsp; Help
        </span>
        <span class="nav-opt opt-3" onclick="window.location.assign('/guide');">
           <i class="fas fa-info-circle"></i> &nbsp;&nbsp;&nbsp;&nbsp; Guide
        </span>
        <span class="nav-opt opt-3" onclick="window.location.assign('/feedback');">
           <i class="fas fa-comment-alt"></i> &nbsp;&nbsp;&nbsp;&nbsp; Feedback
        </span>
        <span class="nav-opt opt-3" onclick="window.location.assign('/contact');">
           <i class="fas fa-phone-square-alt"></i> &nbsp;&nbsp;&nbsp;&nbsp; Contact us
        </span>

    </nav>

    <section class="body-div ">
        <div class="for-section-heading" id="section-heading">
            <span class="section-icon">
                <i class="fas fa-user-circle"></i>
            </span>
            <div class="for-heading-sh">
                <span class="section-heading">
                    Profile
                </span>
            </div>
        </div>


        {{!-- <div class="animation-div"></div> --}}

        <div class="main">
            <div class="for-pic-and-btn">
                <div class="for-pic">
                    <img src="profiles/{{data.dp}}" alt="your-dp" class="yourDp">
                    <div class="pic-shade"></div>
                    <a href="#dp" style="text-decoration: none;"><button class="btn btn-warning change-btn">Change</button></a>
                </div>
            </div>
            <div class="for-name-and-btn">
                <h1 class="your-name">
                    {{data.name}}
                </h1>
                <h1 class="your-name your-username">
                    {{data.username}} (You)
                </h1>
                <div class="wanna-change-name">
                    <span class="update-text">
                        Do you want to update your name?
                    </span>
                    <form action="updateName" method="post" name="updateNameForm" onsubmit="return validName();" >
                        <input type="text" required class="form-input inp_name" autocomplete="off" placeholder="New Name" name="updatedName">
                        <input type="submit" value="update" class="btn btn-update">
                    </form>
                </div>
                <div class="wanna-change-dp" id="dp">
                    <span class="update-text">
                        Do you want to update your Profile Photo?
                    </span>
                    <form action="updateDp" method="post" name="dpForm"  enctype="multipart/form-data" onsubmit="return validDp();">
                        <input type="file" class="form-input inp_name" accept="image/png , image/jpeg" name="updatedDp">
                        <input type="submit" value="update" class="btn btn-update-2">
                    </form>
                </div>
                 <div class="wanna-change-ps" id="dp">
                    <span class="update-text">
                        Do you want to update your Password?
                    </span>
                    <form action="updatePs" method="post" name="psForm" onsubmit="return validPs();">
                        <input type="password" class="form-input inp_name" required name="oldps" placeholder="Old Password">
                        <input type="password" pattern=".{6,40}" required title="6 to 40 characters " class="form-input inp_name" name="newps" placeholder="New Password">
                        <input type="password"  pattern=".{6,40}" required title="6 to 40 characters "  class="form-input inp_name" name="newpsConfirm" placeholder="Confirm Password">
                        <input type="submit" value="update" class="btn btn-update-2 btn-update-3">
                    </form>
                </div>
            </div>
        </div>



    </section>
    
   
    <script>
        function shownav(){
            document.getElementById("bar").style.display = "none";
            document.getElementById("cut").style.display = "block";
            
            document.getElementById("bar-mobi").style.display = "none";
            document.getElementById("cut-mobi").style.display = "block";
            document.getElementById("nav").style.display = "block";
        }
        function cutnav(){
            document.getElementById("bar").style.display = "block";
            document.getElementById("cut").style.display = "none";
            
            document.getElementById("bar-mobi").style.display = "block";
            document.getElementById("cut-mobi").style.display = "none";
            document.getElementById("nav").style.display = "none";
        }
    </script>


    <script>
        function validPs(){
            var oldps = document.forms["psForm"]["oldps"].value;
            var newps = document.forms["psForm"]["newps"].value;
            var newpsConfirm = document.forms["psForm"]["newpsConfirm"].value;
            if(oldps.trim()==""){
                alert("Please enter the old password");
                return false;
            }
            if(newps.trim()==""){
                alert("Please enter new the password");
                return false;
            }
            if(newpsConfirm.trim()==""){
                alert("Please confirm the password");
                return false;
            }
            if(newpsConfirm!=newps){
                alert("New password confirmation failed");
                return false;
            }
            return true;
        }
        function validDp(){
            var dp = document.forms["dpForm"]["updatedDp"].value;
            if(dp.trim()==""){
                alert("Please select a image");
                return false;
            }
            return true;
        }
        function validName(){
            var name = document.forms["updateNameForm"]["updatedName"].value;
            if(name.trim()==""){
                alert("Please enter a valid name");
                return false;
            }
            name = name.trim();
            if(name.length<3){
                alert("Name should contain atleast 3 characters");
                return false;
            }
            return true;
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

</body>

</html>